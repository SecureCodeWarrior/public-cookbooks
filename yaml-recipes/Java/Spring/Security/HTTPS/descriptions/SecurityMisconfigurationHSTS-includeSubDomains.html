<html>
<body>
<p id="abstract">Setting <code>includeSubDomains()</code> to true makes sure that subdomains will also be treated as an HSTS domain. This is a default setting in Spring Security.</p>
<br>
<p id="impact_and_desired_state">Cookies can be manipulated from sub-domains, so omitting the <code>includeSubDomains()</code> option permits a broad range of cookie-related attacks that HSTS would otherwise prevent by requiring a valid certificate for a subdomain. Ensuring the secure flag is set on all cookies will also prevent, some, but not all, of the same attacks.
  By using the default setting, or explicitly setting <code>includeSubDomains()</code> to true, will instruct Spring Security to treat the subdomains as part of the HSTS domain.</p>
<br>
<b>Before</b>
<pre>http
    .headers()
    .httpStrictTransportSecurity()
    .includeSubdomains(<b>false</b>)
    .maxAgeSeconds(31536000);</pre>
<b>After</b>
<pre>http
    .headers()
    .httpStrictTransportSecurity()
    .includeSubdomains(<b>true</b>)
    .maxAgeSeconds(31536000);</pre>
<br>
<b>References</b>
<ul>
  <li><a href="https://docs.spring.io/spring-security/site/docs/4.2.x/reference/html/headers.html">Spring Security Guide: Security HTTP Response Headers</a></li>
</ul>
</body>
</html>